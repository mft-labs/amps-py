<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>amps.action API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>amps.action</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">import traceback
import os
import json
from .logger import Logger


class Action:
    &#39;&#39;&#39;The `Action` class from AMPS provides a base class for actions that must be extended in a custom action. Actions can be performed by overriding the `action` callback exposed by the class. 

    The following attributes are available on the `Action` instance.

    - msg: The msg attribute contains a python of the dictionary and the message with all of its metadata. Message data can be accessed from the msg attribute, either using the &#34;data&#34; key for inline data, or the &#34;fpath&#34; key for a path to the file containing the data. 
    - parms: The parms attribute contains all the parameters of the configured action including any extra parameters you may have specified under the &#34;parms&#34; key. 
    - sysparms: The sysparms attribute contains all useful system configuration parameters for use in actions. Currently, sysparms only contains the AMPS temporary directory under the &#34;tempdir&#34; key. 
    - provider: If use_provider is true on the configured action, the provider attribute contains the provider parameters. The provider parameters are available under the parms  object as well under the &#34;provider&#34; key. 
    - logger: The logger attribute exposes a Logger object for logging events back to AMPS. Any messages logged using this object during the action execution will appear in the corresponding session logs. 

    #### Usage:
    ```
    from amps import Action
    def my_action(Action):
        def action(self):
            # Perform Action Logic Here
            if success:
                return Action.send_status(&#34;completed&#34;)
            else:
                return Action.send_status(&#34;failed&#34;, &#34;Reason for Failure&#34;)
    ```
    &#39;&#39;&#39;

    def __init__(self, msgdata):
        msgdata = json.loads(msgdata)
        self.msg = msgdata[&#34;msg&#34;]
        self.parms = msgdata[&#34;parms&#34;]
        self.sysparms = msgdata[&#34;sysparms&#34;]
        if self.parms[&#34;use_provider&#34;]:
            self.provider = self.parms[&#34;provider&#34;]
        if self.msg.get(&#34;sid&#34;):
            self.logger = Logger(sid=self.msg[&#34;sid&#34;])
        else:
            self.logger = Logger()

    def __run__(self):
        try:
            response = self.action()
        except Exception as e:
            response = {&#34;status&#34;: &#34;failed&#34;, &#34;reason&#34;: traceback.format_exc()}
        return json.dumps(response)

    def action(self):
        &#39;&#39;&#39;Callback for performing action logic in a class that extends `Action`.

        :param self: Contains a reference to `Action` instance object.

        The action method is the class callback method that you are intended to override when creating an action. Relevant message data is available via the attributes available on the self object. It expects the method to return a python dictionary with at least a &#34;status&#34; key with the status of the action execution. If the action execution is unsuccessful, a &#34;reason&#34; key can also be returned along with an unsuccessful status. If a new message is intended to be created by this action, it is also expected that a &#34;msg&#34; key will be returned with a dictionary object containing either a &#34;data&#34; key with inline data or an &#34;fpath&#34; key containing the file path to the message. Similarly, actions used in Endpoints can return a &#34;response&#34; object with the response status code specified under the &#34;code&#34; key, and the response body provided via either the &#34;data&#34; or &#34;fpath&#34; key. The action method is automatically wrapped in a try-except block when it is called, so is unnecessary to wrap the overall method in a try-except block. If you wish to have more granular visibility over errors that arise in your actions, feel free to use try-except blocks at various steps throughout action execution to allow for logging specific reasons for failure. To simplify action creation and handling, a number of helper methods are exposed by the class as static methods.

        #### Usage:
        ```
        from amps import Action
        def my_action(Action):
            def action(self):
                # Perform Action Logic Here
                if success:
                    return Action.send_status(&#34;completed&#34;)
                else:
                    return Action.send_status(&#34;failed&#34;, &#34;Reason for Failure&#34;)
        ```
        &#39;&#39;&#39;
        return {&#34;status&#34;: &#34;completed&#34;}

    @staticmethod
    def send_status(status: str, reason: str = None):
        &#39;&#39;&#39;Static method for creating a dictionary with the provided status and optional reason for returning in the `action` callback.

        :param status: The Action status to log.
        :param reason: An optional reason to provide along with the given status.

        #### Usage:
        ```
        from amps import Action
        def my_action(Action):
            def action(self):
                # Perform Action Logic Here
                if success:
                    return Action.send_status(&#34;completed&#34;)
                else:
                    return Action.send_status(&#34;failed&#34;, &#34;Reason for Failure&#34;)
        ```
        &#39;&#39;&#39;
        if reason:
            return {&#34;status&#34;: status, &#34;reason&#34;: reason}
        else:
            return {&#34;status&#34;: status}

    @staticmethod
    def send_file(status: str, fpath: str, meta: dict = {}):
        &#39;&#39;&#39;Static method for creating a dictionary with the provided status and a new message from the provided fpath and additional metadata for returning in the `action` callback.

        :param status: The Action status to log.
        :param fpath: A filepath containing the message data.
        :param meta: An optional dictionary containing additional metadata to add to the new message.

        This convenience method allows for the creation of a new message using the file specified in `fpath` and any additional metadata supplied in :param:`meta`. File Size (fsize) and File Name (fname) are automatically retrieved from the given file. 

        #### Usage:
        ```
        from amps import Action
        def my_action(Action):
            def action(self):
                # Perform Action Logic Here
                if success:
                    return Action.send_file(&#34;completed&#34;, &#34;path/to/file&#34;, {&#34;partner&#34;: &#34;companyX&#34;})
                else:
                    return Action.send_status(&#34;failed&#34;, &#34;Reason for Failure&#34;)
        ```
        &#39;&#39;&#39;
        fname = os.path.basename(fpath)
        fsize = os.path.getsize(fpath)
        msg = {**{&#34;fname&#34;: fname, &#34;fsize&#34;: fsize, &#34;fpath&#34;: fpath}, **meta}
        return {&#34;status&#34;: status, &#34;msg&#34;: msg}

    @staticmethod
    def send_data(status: str, data: str, meta: dict = {}):
        &#39;&#39;&#39;Static method for creating a dictionary with the provided status and a new message with the provided inline data and additional metadata for returning in the `action` callback.

        :param status: The Action status to log.
        :param data: A string containing the message data.
        :param meta: An optional dictionary containing additional metadata to add to the new message.

        This convenience method allows for the creation of a new message using the inline data specified in :param`data` and any additional metadata supplied in :param:`meta`.

        #### Usage:
        ```
        from amps import Action
        def my_action(Action):
            def action(self):
                # Perform Action Logic Here
                if success:
                    return Action.send_data(&#34;completed&#34;, &#34;Hello, this is my inline data.&#34;, {&#34;partner&#34;: &#34;companyX&#34;})
                else:
                    return Action.send_status(&#34;failed&#34;, &#34;Reason for Failure&#34;)
        ```
        &#39;&#39;&#39;
        msg = {**{&#34;data&#34;: data}, **meta}
        return {&#34;status&#34;: status, &#34;msg&#34;: msg}

    @staticmethod
    def send_error(reason: str):
        &#39;&#39;&#39;Static method for handling errors by creating a dictionary with a ``failed`` status and the provided reason for returning in the `action` callback.

        :param reason: The reason for the action failure.

        This convenience method allows for the quick handling of error using the default ``failed`` status along with the reason specified in :param`reason`.

        #### Usage:
        ```
        from amps import Action
        def my_action(Action):
            def action(self):
                # Perform Action Logic Here
                if success:
                    return Action.send_status(&#34;completed&#34;)
                else:
                    return Action.send_error(&#34;Reason for Failure&#34;)
        ```
        &#39;&#39;&#39;
        return {&#34;status&#34;: &#34;failed&#34;, &#34;reason&#34;: reason}</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="amps.action.Action"><code class="flex name class">
<span>class <span class="ident">Action</span></span>
<span>(</span><span>msgdata)</span>
</code></dt>
<dd>
<div class="desc"><p>The <code><a title="amps.action.Action" href="#amps.action.Action">Action</a></code> class from AMPS provides a base class for actions that must be extended in a custom action. Actions can be performed by overriding the <code>action</code> callback exposed by the class. </p>
<p>The following attributes are available on the <code><a title="amps.action.Action" href="#amps.action.Action">Action</a></code> instance.</p>
<ul>
<li>msg: The msg attribute contains a python of the dictionary and the message with all of its metadata. Message data can be accessed from the msg attribute, either using the "data" key for inline data, or the "fpath" key for a path to the file containing the data. </li>
<li>parms: The parms attribute contains all the parameters of the configured action including any extra parameters you may have specified under the "parms" key. </li>
<li>sysparms: The sysparms attribute contains all useful system configuration parameters for use in actions. Currently, sysparms only contains the AMPS temporary directory under the "tempdir" key. </li>
<li>provider: If use_provider is true on the configured action, the provider attribute contains the provider parameters. The provider parameters are available under the parms
object as well under the "provider" key. </li>
<li>logger: The logger attribute exposes a Logger object for logging events back to AMPS. Any messages logged using this object during the action execution will appear in the corresponding session logs. </li>
</ul>
<h4 id="usage">Usage:</h4>
<pre><code>from amps import Action
def my_action(Action):
    def action(self):
        # Perform Action Logic Here
        if success:
            return Action.send_status(&quot;completed&quot;)
        else:
            return Action.send_status(&quot;failed&quot;, &quot;Reason for Failure&quot;)
</code></pre></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Action:
    &#39;&#39;&#39;The `Action` class from AMPS provides a base class for actions that must be extended in a custom action. Actions can be performed by overriding the `action` callback exposed by the class. 

    The following attributes are available on the `Action` instance.

    - msg: The msg attribute contains a python of the dictionary and the message with all of its metadata. Message data can be accessed from the msg attribute, either using the &#34;data&#34; key for inline data, or the &#34;fpath&#34; key for a path to the file containing the data. 
    - parms: The parms attribute contains all the parameters of the configured action including any extra parameters you may have specified under the &#34;parms&#34; key. 
    - sysparms: The sysparms attribute contains all useful system configuration parameters for use in actions. Currently, sysparms only contains the AMPS temporary directory under the &#34;tempdir&#34; key. 
    - provider: If use_provider is true on the configured action, the provider attribute contains the provider parameters. The provider parameters are available under the parms  object as well under the &#34;provider&#34; key. 
    - logger: The logger attribute exposes a Logger object for logging events back to AMPS. Any messages logged using this object during the action execution will appear in the corresponding session logs. 

    #### Usage:
    ```
    from amps import Action
    def my_action(Action):
        def action(self):
            # Perform Action Logic Here
            if success:
                return Action.send_status(&#34;completed&#34;)
            else:
                return Action.send_status(&#34;failed&#34;, &#34;Reason for Failure&#34;)
    ```
    &#39;&#39;&#39;

    def __init__(self, msgdata):
        msgdata = json.loads(msgdata)
        self.msg = msgdata[&#34;msg&#34;]
        self.parms = msgdata[&#34;parms&#34;]
        self.sysparms = msgdata[&#34;sysparms&#34;]
        if self.parms[&#34;use_provider&#34;]:
            self.provider = self.parms[&#34;provider&#34;]
        if self.msg.get(&#34;sid&#34;):
            self.logger = Logger(sid=self.msg[&#34;sid&#34;])
        else:
            self.logger = Logger()

    def __run__(self):
        try:
            response = self.action()
        except Exception as e:
            response = {&#34;status&#34;: &#34;failed&#34;, &#34;reason&#34;: traceback.format_exc()}
        return json.dumps(response)

    def action(self):
        &#39;&#39;&#39;Callback for performing action logic in a class that extends `Action`.

        :param self: Contains a reference to `Action` instance object.

        The action method is the class callback method that you are intended to override when creating an action. Relevant message data is available via the attributes available on the self object. It expects the method to return a python dictionary with at least a &#34;status&#34; key with the status of the action execution. If the action execution is unsuccessful, a &#34;reason&#34; key can also be returned along with an unsuccessful status. If a new message is intended to be created by this action, it is also expected that a &#34;msg&#34; key will be returned with a dictionary object containing either a &#34;data&#34; key with inline data or an &#34;fpath&#34; key containing the file path to the message. Similarly, actions used in Endpoints can return a &#34;response&#34; object with the response status code specified under the &#34;code&#34; key, and the response body provided via either the &#34;data&#34; or &#34;fpath&#34; key. The action method is automatically wrapped in a try-except block when it is called, so is unnecessary to wrap the overall method in a try-except block. If you wish to have more granular visibility over errors that arise in your actions, feel free to use try-except blocks at various steps throughout action execution to allow for logging specific reasons for failure. To simplify action creation and handling, a number of helper methods are exposed by the class as static methods.

        #### Usage:
        ```
        from amps import Action
        def my_action(Action):
            def action(self):
                # Perform Action Logic Here
                if success:
                    return Action.send_status(&#34;completed&#34;)
                else:
                    return Action.send_status(&#34;failed&#34;, &#34;Reason for Failure&#34;)
        ```
        &#39;&#39;&#39;
        return {&#34;status&#34;: &#34;completed&#34;}

    @staticmethod
    def send_status(status: str, reason: str = None):
        &#39;&#39;&#39;Static method for creating a dictionary with the provided status and optional reason for returning in the `action` callback.

        :param status: The Action status to log.
        :param reason: An optional reason to provide along with the given status.

        #### Usage:
        ```
        from amps import Action
        def my_action(Action):
            def action(self):
                # Perform Action Logic Here
                if success:
                    return Action.send_status(&#34;completed&#34;)
                else:
                    return Action.send_status(&#34;failed&#34;, &#34;Reason for Failure&#34;)
        ```
        &#39;&#39;&#39;
        if reason:
            return {&#34;status&#34;: status, &#34;reason&#34;: reason}
        else:
            return {&#34;status&#34;: status}

    @staticmethod
    def send_file(status: str, fpath: str, meta: dict = {}):
        &#39;&#39;&#39;Static method for creating a dictionary with the provided status and a new message from the provided fpath and additional metadata for returning in the `action` callback.

        :param status: The Action status to log.
        :param fpath: A filepath containing the message data.
        :param meta: An optional dictionary containing additional metadata to add to the new message.

        This convenience method allows for the creation of a new message using the file specified in `fpath` and any additional metadata supplied in :param:`meta`. File Size (fsize) and File Name (fname) are automatically retrieved from the given file. 

        #### Usage:
        ```
        from amps import Action
        def my_action(Action):
            def action(self):
                # Perform Action Logic Here
                if success:
                    return Action.send_file(&#34;completed&#34;, &#34;path/to/file&#34;, {&#34;partner&#34;: &#34;companyX&#34;})
                else:
                    return Action.send_status(&#34;failed&#34;, &#34;Reason for Failure&#34;)
        ```
        &#39;&#39;&#39;
        fname = os.path.basename(fpath)
        fsize = os.path.getsize(fpath)
        msg = {**{&#34;fname&#34;: fname, &#34;fsize&#34;: fsize, &#34;fpath&#34;: fpath}, **meta}
        return {&#34;status&#34;: status, &#34;msg&#34;: msg}

    @staticmethod
    def send_data(status: str, data: str, meta: dict = {}):
        &#39;&#39;&#39;Static method for creating a dictionary with the provided status and a new message with the provided inline data and additional metadata for returning in the `action` callback.

        :param status: The Action status to log.
        :param data: A string containing the message data.
        :param meta: An optional dictionary containing additional metadata to add to the new message.

        This convenience method allows for the creation of a new message using the inline data specified in :param`data` and any additional metadata supplied in :param:`meta`.

        #### Usage:
        ```
        from amps import Action
        def my_action(Action):
            def action(self):
                # Perform Action Logic Here
                if success:
                    return Action.send_data(&#34;completed&#34;, &#34;Hello, this is my inline data.&#34;, {&#34;partner&#34;: &#34;companyX&#34;})
                else:
                    return Action.send_status(&#34;failed&#34;, &#34;Reason for Failure&#34;)
        ```
        &#39;&#39;&#39;
        msg = {**{&#34;data&#34;: data}, **meta}
        return {&#34;status&#34;: status, &#34;msg&#34;: msg}

    @staticmethod
    def send_error(reason: str):
        &#39;&#39;&#39;Static method for handling errors by creating a dictionary with a ``failed`` status and the provided reason for returning in the `action` callback.

        :param reason: The reason for the action failure.

        This convenience method allows for the quick handling of error using the default ``failed`` status along with the reason specified in :param`reason`.

        #### Usage:
        ```
        from amps import Action
        def my_action(Action):
            def action(self):
                # Perform Action Logic Here
                if success:
                    return Action.send_status(&#34;completed&#34;)
                else:
                    return Action.send_error(&#34;Reason for Failure&#34;)
        ```
        &#39;&#39;&#39;
        return {&#34;status&#34;: &#34;failed&#34;, &#34;reason&#34;: reason}</code></pre>
</details>
<h3>Subclasses</h3>
<ul class="hlist">
<li><a title="amps.endpoint.Endpoint" href="endpoint.html#amps.endpoint.Endpoint">Endpoint</a></li>
</ul>
<h3>Static methods</h3>
<dl>
<dt id="amps.action.Action.send_data"><code class="name flex">
<span>def <span class="ident">send_data</span></span>(<span>status: str, data: str, meta: dict = {})</span>
</code></dt>
<dd>
<div class="desc"><p>Static method for creating a dictionary with the provided status and a new message with the provided inline data and additional metadata for returning in the <code>action</code> callback.</p>
<p>:param status: The Action status to log.
:param data: A string containing the message data.
:param meta: An optional dictionary containing additional metadata to add to the new message.</p>
<p>This convenience method allows for the creation of a new message using the inline data specified in :param<code>data</code> and any additional metadata supplied in :param:<code>meta</code>.</p>
<h4 id="usage">Usage:</h4>
<pre><code>from amps import Action
def my_action(Action):
    def action(self):
        # Perform Action Logic Here
        if success:
            return Action.send_data(&quot;completed&quot;, &quot;Hello, this is my inline data.&quot;, {&quot;partner&quot;: &quot;companyX&quot;})
        else:
            return Action.send_status(&quot;failed&quot;, &quot;Reason for Failure&quot;)
</code></pre></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@staticmethod
def send_data(status: str, data: str, meta: dict = {}):
    &#39;&#39;&#39;Static method for creating a dictionary with the provided status and a new message with the provided inline data and additional metadata for returning in the `action` callback.

    :param status: The Action status to log.
    :param data: A string containing the message data.
    :param meta: An optional dictionary containing additional metadata to add to the new message.

    This convenience method allows for the creation of a new message using the inline data specified in :param`data` and any additional metadata supplied in :param:`meta`.

    #### Usage:
    ```
    from amps import Action
    def my_action(Action):
        def action(self):
            # Perform Action Logic Here
            if success:
                return Action.send_data(&#34;completed&#34;, &#34;Hello, this is my inline data.&#34;, {&#34;partner&#34;: &#34;companyX&#34;})
            else:
                return Action.send_status(&#34;failed&#34;, &#34;Reason for Failure&#34;)
    ```
    &#39;&#39;&#39;
    msg = {**{&#34;data&#34;: data}, **meta}
    return {&#34;status&#34;: status, &#34;msg&#34;: msg}</code></pre>
</details>
</dd>
<dt id="amps.action.Action.send_error"><code class="name flex">
<span>def <span class="ident">send_error</span></span>(<span>reason: str)</span>
</code></dt>
<dd>
<div class="desc"><p>Static method for handling errors by creating a dictionary with a <code>failed</code> status and the provided reason for returning in the <code>action</code> callback.</p>
<p>:param reason: The reason for the action failure.</p>
<p>This convenience method allows for the quick handling of error using the default <code>failed</code> status along with the reason specified in :param<code>reason</code>.</p>
<h4 id="usage">Usage:</h4>
<pre><code>from amps import Action
def my_action(Action):
    def action(self):
        # Perform Action Logic Here
        if success:
            return Action.send_status(&quot;completed&quot;)
        else:
            return Action.send_error(&quot;Reason for Failure&quot;)
</code></pre></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@staticmethod
def send_error(reason: str):
    &#39;&#39;&#39;Static method for handling errors by creating a dictionary with a ``failed`` status and the provided reason for returning in the `action` callback.

    :param reason: The reason for the action failure.

    This convenience method allows for the quick handling of error using the default ``failed`` status along with the reason specified in :param`reason`.

    #### Usage:
    ```
    from amps import Action
    def my_action(Action):
        def action(self):
            # Perform Action Logic Here
            if success:
                return Action.send_status(&#34;completed&#34;)
            else:
                return Action.send_error(&#34;Reason for Failure&#34;)
    ```
    &#39;&#39;&#39;
    return {&#34;status&#34;: &#34;failed&#34;, &#34;reason&#34;: reason}</code></pre>
</details>
</dd>
<dt id="amps.action.Action.send_file"><code class="name flex">
<span>def <span class="ident">send_file</span></span>(<span>status: str, fpath: str, meta: dict = {})</span>
</code></dt>
<dd>
<div class="desc"><p>Static method for creating a dictionary with the provided status and a new message from the provided fpath and additional metadata for returning in the <code>action</code> callback.</p>
<p>:param status: The Action status to log.
:param fpath: A filepath containing the message data.
:param meta: An optional dictionary containing additional metadata to add to the new message.</p>
<p>This convenience method allows for the creation of a new message using the file specified in <code>fpath</code> and any additional metadata supplied in :param:<code>meta</code>. File Size (fsize) and File Name (fname) are automatically retrieved from the given file. </p>
<h4 id="usage">Usage:</h4>
<pre><code>from amps import Action
def my_action(Action):
    def action(self):
        # Perform Action Logic Here
        if success:
            return Action.send_file(&quot;completed&quot;, &quot;path/to/file&quot;, {&quot;partner&quot;: &quot;companyX&quot;})
        else:
            return Action.send_status(&quot;failed&quot;, &quot;Reason for Failure&quot;)
</code></pre></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@staticmethod
def send_file(status: str, fpath: str, meta: dict = {}):
    &#39;&#39;&#39;Static method for creating a dictionary with the provided status and a new message from the provided fpath and additional metadata for returning in the `action` callback.

    :param status: The Action status to log.
    :param fpath: A filepath containing the message data.
    :param meta: An optional dictionary containing additional metadata to add to the new message.

    This convenience method allows for the creation of a new message using the file specified in `fpath` and any additional metadata supplied in :param:`meta`. File Size (fsize) and File Name (fname) are automatically retrieved from the given file. 

    #### Usage:
    ```
    from amps import Action
    def my_action(Action):
        def action(self):
            # Perform Action Logic Here
            if success:
                return Action.send_file(&#34;completed&#34;, &#34;path/to/file&#34;, {&#34;partner&#34;: &#34;companyX&#34;})
            else:
                return Action.send_status(&#34;failed&#34;, &#34;Reason for Failure&#34;)
    ```
    &#39;&#39;&#39;
    fname = os.path.basename(fpath)
    fsize = os.path.getsize(fpath)
    msg = {**{&#34;fname&#34;: fname, &#34;fsize&#34;: fsize, &#34;fpath&#34;: fpath}, **meta}
    return {&#34;status&#34;: status, &#34;msg&#34;: msg}</code></pre>
</details>
</dd>
<dt id="amps.action.Action.send_status"><code class="name flex">
<span>def <span class="ident">send_status</span></span>(<span>status: str, reason: str = None)</span>
</code></dt>
<dd>
<div class="desc"><p>Static method for creating a dictionary with the provided status and optional reason for returning in the <code>action</code> callback.</p>
<p>:param status: The Action status to log.
:param reason: An optional reason to provide along with the given status.</p>
<h4 id="usage">Usage:</h4>
<pre><code>from amps import Action
def my_action(Action):
    def action(self):
        # Perform Action Logic Here
        if success:
            return Action.send_status(&quot;completed&quot;)
        else:
            return Action.send_status(&quot;failed&quot;, &quot;Reason for Failure&quot;)
</code></pre></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@staticmethod
def send_status(status: str, reason: str = None):
    &#39;&#39;&#39;Static method for creating a dictionary with the provided status and optional reason for returning in the `action` callback.

    :param status: The Action status to log.
    :param reason: An optional reason to provide along with the given status.

    #### Usage:
    ```
    from amps import Action
    def my_action(Action):
        def action(self):
            # Perform Action Logic Here
            if success:
                return Action.send_status(&#34;completed&#34;)
            else:
                return Action.send_status(&#34;failed&#34;, &#34;Reason for Failure&#34;)
    ```
    &#39;&#39;&#39;
    if reason:
        return {&#34;status&#34;: status, &#34;reason&#34;: reason}
    else:
        return {&#34;status&#34;: status}</code></pre>
</details>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="amps.action.Action.action"><code class="name flex">
<span>def <span class="ident">action</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Callback for performing action logic in a class that extends <code><a title="amps.action.Action" href="#amps.action.Action">Action</a></code>.</p>
<p>:param self: Contains a reference to <code><a title="amps.action.Action" href="#amps.action.Action">Action</a></code> instance object.</p>
<p>The action method is the class callback method that you are intended to override when creating an action. Relevant message data is available via the attributes available on the self object. It expects the method to return a python dictionary with at least a "status" key with the status of the action execution. If the action execution is unsuccessful, a "reason" key can also be returned along with an unsuccessful status. If a new message is intended to be created by this action, it is also expected that a "msg" key will be returned with a dictionary object containing either a "data" key with inline data or an "fpath" key containing the file path to the message. Similarly, actions used in Endpoints can return a "response" object with the response status code specified under the "code" key, and the response body provided via either the "data" or "fpath" key. The action method is automatically wrapped in a try-except block when it is called, so is unnecessary to wrap the overall method in a try-except block. If you wish to have more granular visibility over errors that arise in your actions, feel free to use try-except blocks at various steps throughout action execution to allow for logging specific reasons for failure. To simplify action creation and handling, a number of helper methods are exposed by the class as static methods.</p>
<h4 id="usage">Usage:</h4>
<pre><code>from amps import Action
def my_action(Action):
    def action(self):
        # Perform Action Logic Here
        if success:
            return Action.send_status(&quot;completed&quot;)
        else:
            return Action.send_status(&quot;failed&quot;, &quot;Reason for Failure&quot;)
</code></pre></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def action(self):
    &#39;&#39;&#39;Callback for performing action logic in a class that extends `Action`.

    :param self: Contains a reference to `Action` instance object.

    The action method is the class callback method that you are intended to override when creating an action. Relevant message data is available via the attributes available on the self object. It expects the method to return a python dictionary with at least a &#34;status&#34; key with the status of the action execution. If the action execution is unsuccessful, a &#34;reason&#34; key can also be returned along with an unsuccessful status. If a new message is intended to be created by this action, it is also expected that a &#34;msg&#34; key will be returned with a dictionary object containing either a &#34;data&#34; key with inline data or an &#34;fpath&#34; key containing the file path to the message. Similarly, actions used in Endpoints can return a &#34;response&#34; object with the response status code specified under the &#34;code&#34; key, and the response body provided via either the &#34;data&#34; or &#34;fpath&#34; key. The action method is automatically wrapped in a try-except block when it is called, so is unnecessary to wrap the overall method in a try-except block. If you wish to have more granular visibility over errors that arise in your actions, feel free to use try-except blocks at various steps throughout action execution to allow for logging specific reasons for failure. To simplify action creation and handling, a number of helper methods are exposed by the class as static methods.

    #### Usage:
    ```
    from amps import Action
    def my_action(Action):
        def action(self):
            # Perform Action Logic Here
            if success:
                return Action.send_status(&#34;completed&#34;)
            else:
                return Action.send_status(&#34;failed&#34;, &#34;Reason for Failure&#34;)
    ```
    &#39;&#39;&#39;
    return {&#34;status&#34;: &#34;completed&#34;}</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="amps" href="index.html">amps</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="amps.action.Action" href="#amps.action.Action">Action</a></code></h4>
<ul class="">
<li><code><a title="amps.action.Action.action" href="#amps.action.Action.action">action</a></code></li>
<li><code><a title="amps.action.Action.send_data" href="#amps.action.Action.send_data">send_data</a></code></li>
<li><code><a title="amps.action.Action.send_error" href="#amps.action.Action.send_error">send_error</a></code></li>
<li><code><a title="amps.action.Action.send_file" href="#amps.action.Action.send_file">send_file</a></code></li>
<li><code><a title="amps.action.Action.send_status" href="#amps.action.Action.send_status">send_status</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>